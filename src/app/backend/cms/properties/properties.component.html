<div class="row col-sm-12">
    <h1>Propiedades</h1>
</div>
<div class="row col-sm-12">
    <h3 class="col-sm-12">Acción</h3>
    <mat-form-field class="col-sm-5">

        <select matNativeControl required [(ngModel)]="propertyDocumentId" (change)="select()">
            <option value="-1">Nueva</option>
            <option *ngFor="let property of properties" value="{{property.id}}">{{property.data.title}}</option>
        </select>
    </mat-form-field>
</div>
<div class="row col-sm-12">
    <div class="col-sm-12">
        <h3>Campos</h3>
    </div>
    <div class="col-sm-12">
        <h5 class="col-sm-3 pull-left">Mostrar en página?</h5>
        <div class="col-sm-5 pull-left">
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [(ngModel)]="property.isEnable">
                <mat-button-toggle value="true">Habilitada</mat-button-toggle>
                <mat-button-toggle value="false">Deshabilitada</mat-button-toggle>
            </mat-button-toggle-group>
        </div>
    </div>
    <div class="col-sm-12">
        <h5 class="col-sm-3 pull-left">Propiedad destacada?</h5>
        <div class="col-sm-5 pull-left">
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [(ngModel)]="property.promotion">
                <mat-button-toggle value="true">En promoción</mat-button-toggle>
                <mat-button-toggle value="false">Normal</mat-button-toggle>
            </mat-button-toggle-group>
        </div>
    </div>
    <div class="col-sm-12">
        <mat-form-field class="full-width">
            <input matInput placeholder="Titulo" [(ngModel)]="property.title" type="text" required>
        </mat-form-field>
    </div>
    <div class="col-sm-2">
        <mat-form-field>
            <mat-label>Tipo Operación</mat-label>
            <select matNativeControl required [(ngModel)]="property.operationType">
                <option value="renta">Alquiler</option>
                <option value="venta">Venta</option>
            </select>
        </mat-form-field>
    </div>
    <div class="col-sm-2">
        <mat-form-field>
            <mat-label>Tipo Propiedad</mat-label>
            <select matNativeControl required [(ngModel)]="property.propertyType">
                <option value="apartamento">Apartamento</option>
                <option value="casa">Cassa</option>
                <option value="oficina">Oficina</option>
                <option value="terreno">Terreno</option>
            </select>
        </mat-form-field>
    </div>
    <div class="col-sm-7">
        <div class="col-sm-2 pull-left">
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [(ngModel)]="property.currency">
                <mat-button-toggle value="$">$</mat-button-toggle>
                <mat-button-toggle value="Q">Q</mat-button-toggle>
            </mat-button-toggle-group>
        </div>
        <div class="col-sm-10 pull-left">
            <mat-form-field class="full-width">
                <input matInput placeholder="Precio" [(ngModel)]="property.price" type="number" required>
            </mat-form-field>
        </div>
    </div>
    <div class="col-sm-12"></div>
    <div class="col-sm-2">
        <mat-form-field class="full-width">
            <input matInput placeholder="Habitaciones" [(ngModel)]="property.rooms" type="number" required>
        </mat-form-field>
    </div>
    <div class="col-sm-2">
        <mat-form-field class="full-width">
            <input matInput placeholder="Parqueo" [(ngModel)]="property.parking" type="number" required>
        </mat-form-field>
    </div>
    <div class="col-sm-2">
        <mat-form-field class="full-width">
            <input matInput placeholder="Metraje (2 mts)" [(ngModel)]="property.length" value="0 mts2" required>
        </mat-form-field>
    </div>
    <div class="col-sm-2">
        <mat-form-field class="full-width">
            <input matInput placeholder="Baños" [(ngModel)]="property.bathroom" type="number" required>
        </mat-form-field>
    </div>
    <div class="col-sm-12">
        <div class="col-sm-1 pull-left">
            <h5>Ubicación</h5>
        </div>
        <div class="col-sm-2 pull-left">
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" [(ngModel)]="ubicacion">
                <mat-button-toggle value="existente">Existente</mat-button-toggle>
                <mat-button-toggle value="nueva">Nueva</mat-button-toggle>
            </mat-button-toggle-group>
        </div>
        <div class="col-sm-7 pull-left" *ngIf="ubicacion=='nueva'">
            <mat-form-field class="full-width">
                <input matInput placeholder="Ubicación" [(ngModel)]="property.location" type="text" required>
            </mat-form-field>
        </div>
        <div class="col-sm-5 pull-left" *ngIf="ubicacion=='existente'">
            <mat-form-field class="full-width">
                <mat-label>Ubicación</mat-label>
                <select matNativeControl required [(ngModel)]="property.location">
                    <option *ngFor="let location of locations;" value="{{location}}">{{location}}</option>

                </select>
            </mat-form-field>
        </div>

    </div>
    <div class="col-sm-12">
        <mat-form-field class="full-width">
            <textarea matInput placeholder="Descripción" [(ngModel)]="property.description" required></textarea>
        </mat-form-field>
    </div>
    <div class="col-sm-12">
        <h4>Galeria</h4>
    </div>
    <div class="col-sm-12">
        <div class="col-sm-3">
            <label>Subir nueva imagen a la galería</label>
        </div>
        <div class="col-sm-5">
            <form [formGroup]="form" (ngSubmit)="upload()">
                <input type="file" id="file" name="item" (change)="handleFileInput($event)"/>
                &nbsp;
                <button mat-stroked-button type="submit" color="primary">Subir</button>
            </form>
        </div>
    </div>
    <div class="col-sm-12">
        <h5>Imagenes existentes</h5>
    </div>
    <div class="col-sm-12 gallery-container">
        <div class="col-sm-2 galler-item" *ngFor="let item of property.gallery; let i = index">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Imagen {{i + 1}}</mat-card-title>
                </mat-card-header>
                <img mat-card-image src="http://localhost/sdr/{{item}}" alt="Image">
                <mat-card-content>

                </mat-card-content>
                <mat-card-actions>
                    <button mat-stroked-button color="warn" (click)="deleteImage(i)">Eliminar</button>
                </mat-card-actions>
            </mat-card>
        </div>
    </div>
    <div class="col-sm-12 gallery-container">
        <button mat-stroked-button color="primary" class="pull-right" (click)="save()">
            GUARDAR
        </button>
    </div>
</div>
